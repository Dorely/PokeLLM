{
  "metadata": {
    "id": "dnd5e-basic",
    "name": "D&D 5e Basic Rules",
    "version": "1.0.0",
    "description": "Basic D&D 5e ruleset for testing",
    "authors": ["Test Author"],
    "tags": ["fantasy", "dnd", "5e"]
  },
  "characterCreation": {
    "races": [
      {
        "id": "human",
        "name": "Human",
        "description": "Versatile and adaptable",
        "abilityScoreIncrease": {
          "Strength": 1,
          "Dexterity": 1,
          "Constitution": 1,
          "Intelligence": 1,
          "Wisdom": 1,
          "Charisma": 1
        },
        "traits": ["Versatile"],
        "size": "Medium",
        "speed": 30,
        "languages": ["Common"]
      },
      {
        "id": "elf",
        "name": "Elf",
        "description": "Graceful and magical",
        "abilityScoreIncrease": {
          "Dexterity": 2
        },
        "traits": ["Darkvision", "Keen Senses"],
        "size": "Medium", 
        "speed": 30,
        "languages": ["Common", "Elvish"]
      }
    ],
    "classes": [
      {
        "id": "fighter",
        "name": "Fighter",
        "description": "Master of weapons and armor",
        "hitDie": "d10",
        "primaryAbility": ["Strength", "Dexterity"],
        "savingThrowProficiencies": ["Strength", "Constitution"],
        "skillChoices": 2,
        "skillList": ["Athletics", "Intimidation", "Perception", "Survival"],
        "startingEquipment": {
          "weapons": ["Longsword", "Shield"],
          "armor": ["ChainMail"]
        },
        "classFeatures": {
          "1": ["Fighting Style", "Second Wind"],
          "2": ["Action Surge"]
        }
      },
      {
        "id": "wizard",
        "name": "Wizard",
        "description": "Master of arcane magic",
        "hitDie": "d6",
        "primaryAbility": ["Intelligence"],
        "savingThrowProficiencies": ["Intelligence", "Wisdom"],
        "skillChoices": 2,
        "skillList": ["Arcana", "History", "Investigation", "Religion"],
        "startingEquipment": {
          "weapons": ["Dagger"],
          "items": ["Spellbook", "Component Pouch"]
        },
        "classFeatures": {
          "1": ["Spellcasting", "Arcane Recovery"]
        },
        "spellcasting": {
          "ability": "Intelligence",
          "ritual": true,
          "spellbook": true,
          "cantripsKnown": {
            "1": 3
          },
          "spellsKnown": "spellbook",
          "spellSlots": {
            "1": [2]
          }
        }
      }
    ],
    "backgrounds": [
      {
        "id": "acolyte",
        "name": "Acolyte",
        "description": "Served in a temple",
        "skillProficiencies": ["Insight", "Religion"],
        "languages": 2,
        "equipment": ["Holy Symbol", "Prayer Book"],
        "feature": "Shelter of the Faithful"
      }
    ]
  },
  "combatSystem": {
    "initiativeFormula": "d20 + dexterity",
    "attackRollFormula": "d20 + ability + proficiency", 
    "actionTypes": ["Action", "BonusAction", "Reaction", "Movement"],
    "conditions": ["Blinded", "Charmed", "Frightened", "Grappled", "Prone", "Stunned"]
  },
  "spellSystem": {
    "spellcastingAbilities": {
      "wizard": "Intelligence",
      "cleric": "Wisdom",
      "sorcerer": "Charisma"
    },
    "spells": [
      {
        "id": "magic-missile",
        "name": "Magic Missile",
        "level": 1,
        "school": "Evocation",
        "castingTime": "1 action",
        "range": "120 feet",
        "components": ["Verbal", "Somatic"],
        "duration": "Instantaneous",
        "description": "Three glowing darts of magical force",
        "damage": "1d4+1",
        "classes": ["wizard", "sorcerer"]
      }
    ]
  },
  "functionDefinitions": {
    "GameSetup": [
      {
        "id": "select_race",
        "name": "select_race",
        "description": "Select a character race",
        "parameters": [
          {
            "name": "raceId",
            "type": "string",
            "description": "ID of the race to select",
            "required": true
          }
        ],
        "ruleValidations": [
          "!character.race || character.race === ''"
        ],
        "effects": [
          {
            "target": "character.race",
            "operation": "set",
            "value": "{{raceId}}"
          }
        ]
      },
      {
        "id": "select_class",
        "name": "select_class", 
        "description": "Select a character class",
        "parameters": [
          {
            "name": "classId",
            "type": "string",
            "description": "ID of the class to select",
            "required": true
          }
        ],
        "ruleValidations": [
          "!character.characterClass || character.characterClass === ''"
        ],
        "effects": [
          {
            "target": "character.characterClass",
            "operation": "set",
            "value": "{{classId}}"
          }
        ]
      }
    ],
    "Combat": [
      {
        "id": "cast_spell",
        "name": "cast_spell",
        "description": "Cast a spell",
        "parameters": [
          {
            "name": "spellId",
            "type": "string",
            "description": "ID of spell to cast",
            "required": true
          },
          {
            "name": "spellLevel",
            "type": "int",
            "description": "Level to cast at",
            "required": true
          }
        ],
        "ruleValidations": [
          "character.spellSlots[spellLevel] > 0",
          "spellId in character.knownSpells"
        ],
        "effects": [
          {
            "target": "character.spellSlots[{{spellLevel}}]",
            "operation": "subtract",
            "value": 1
          }
        ]
      }
    ]
  },
  "validationRules": {
    "characterCreation": "character.race != null && character.characterClass != null",
    "spellCasting": "character.spellSlots[spellLevel] > 0"
  },
  "promptTemplates": {
    "GameSetup": {
      "systemPrompt": "You are helping create a D&D 5e character",
      "phaseObjective": "Complete character creation",
      "availableFunctions": ["select_race", "select_class"]
    },
    "Combat": {
      "systemPrompt": "You are running D&D 5e combat",
      "phaseObjective": "Execute combat actions",
      "availableFunctions": ["cast_spell", "make_attack"]
    }
  }
}