{
  "metadata": {
    "id": "pokemon-basic",
    "name": "Pokemon Basic Trainer Rules",
    "version": "1.0.0",
    "description": "Basic Pokemon trainer ruleset for testing",
    "authors": ["Test Author"],
    "tags": ["pokemon", "trainer", "adventure"]
  },
  "characterCreation": {
    "trainerClasses": [
      {
        "id": "ace_trainer",
        "name": "Ace Trainer",
        "description": "Well-rounded trainer with balanced skills",
        "startingStats": {
          "Vigor": 12,
          "Dexterity": 12,
          "Intelligence": 12,
          "Empathy": 12,
          "Intuition": 12,
          "Charisma": 12
        },
        "traits": ["Balanced Training", "Leadership"],
        "startingPokemon": 1,
        "startingItems": ["5 Pokeballs", "Potion", "Trainer License"]
      },
      {
        "id": "researcher",
        "name": "Pokemon Researcher", 
        "description": "Focuses on understanding Pokemon behavior and biology",
        "startingStats": {
          "Vigor": 10,
          "Dexterity": 10,
          "Intelligence": 16,
          "Empathy": 14,
          "Intuition": 12,
          "Charisma": 10
        },
        "traits": ["Pokemon Knowledge", "Field Research"],
        "startingPokemon": 1,
        "startingItems": ["3 Pokeballs", "Research Notes", "Pokedex"]
      }
    ],
    "backgrounds": [
      {
        "id": "hometown_hero",
        "name": "Hometown Hero",
        "description": "Local champion starting their journey",
        "skillBonuses": {"Leadership": 2, "Local Knowledge": 2},
        "equipment": ["Town Map", "Lucky Charm"],
        "connections": ["Professor", "Gym Leader"]
      }
    ]
  },
  "pokemonSystem": {
    "captureFormula": "d20 + charisma + pokeball_bonus",
    "loyaltySystem": {
      "baseFormula": "empathy + time_together + battle_victories",
      "maxLoyalty": 100,
      "evolutionThreshold": 80
    },
    "pokemonTypes": [
      "Normal", "Fire", "Water", "Electric", "Grass", "Ice",
      "Fighting", "Poison", "Ground", "Flying", "Psychic", "Bug",
      "Rock", "Ghost", "Dragon", "Dark", "Steel", "Fairy"
    ],
    "typeChart": {
      "Fire": {
        "superEffective": ["Grass", "Ice", "Bug", "Steel"],
        "notVeryEffective": ["Fire", "Water", "Rock", "Dragon"],
        "noEffect": []
      },
      "Water": {
        "superEffective": ["Fire", "Ground", "Rock"],
        "notVeryEffective": ["Water", "Grass", "Dragon"],
        "noEffect": []
      },
      "Electric": {
        "superEffective": ["Water", "Flying"],
        "notVeryEffective": ["Electric", "Grass", "Dragon"],
        "noEffect": ["Ground"]
      }
    }
  },
  "battleSystem": {
    "initiativeFormula": "d20 + dexterity + pokemon_speed",
    "moveAccuracy": "d20 + pokemon_accuracy + move_bonus",
    "damageFormula": "move_power + pokemon_attack + type_effectiveness",
    "statusConditions": ["Paralyzed", "Poisoned", "Burned", "Frozen", "Sleeping", "Confused"]
  },
  "functionDefinitions": {
    "GameSetup": [
      {
        "id": "select_trainer_class",
        "name": "select_trainer_class",
        "description": "Select a trainer class for the character",
        "parameters": [
          {
            "name": "classId",
            "type": "string",
            "description": "ID of the trainer class to select",
            "required": true
          }
        ],
        "ruleValidations": [
          "character.trainerClass == null"
        ],
        "effects": [
          {
            "target": "character.trainerClass",
            "operation": "set",
            "value": "{{classId}}"
          }
        ]
      },
      {
        "id": "choose_starter_pokemon",
        "name": "choose_starter_pokemon",
        "description": "Choose starter Pokemon for the trainer",
        "parameters": [
          {
            "name": "pokemonId",
            "type": "string",
            "description": "ID of the starter Pokemon to choose",
            "required": true
          }
        ],
        "ruleValidations": [
          "character.pokemon.length == 0"
        ],
        "effects": [
          {
            "target": "character.pokemon",
            "operation": "add",
            "value": "{{pokemonId}}"
          }
        ]
      }
    ],
    "Exploration": [
      {
        "id": "attempt_capture",
        "name": "attempt_capture",
        "description": "Attempt to capture a wild Pokemon",
        "parameters": [
          {
            "name": "pokemonId",
            "type": "string",
            "description": "ID of the Pokemon to capture",
            "required": true
          },
          {
            "name": "pokeballType",
            "type": "string",
            "description": "Type of Pokeball to use",
            "required": true
          }
        ],
        "ruleValidations": [
          "character.inventory[pokeballType] > 0",
          "character.pokemon.length < 6"
        ],
        "effects": [
          {
            "target": "character.inventory[{{pokeballType}}]",
            "operation": "subtract",
            "value": 1
          },
          {
            "target": "gameState.player.teamPokemon",
            "operation": "addPokemon",
            "value": "{{pokemonId}}"
          }
        ]
      },
      {
        "id": "use_item",
        "name": "use_item",
        "description": "Use an item from inventory",
        "parameters": [
          {
            "name": "itemId",
            "type": "string",
            "description": "ID of the item to use",
            "required": true
          },
          {
            "name": "targetId",
            "type": "string", 
            "description": "Target to use the item on",
            "required": false
          }
        ],
        "ruleValidations": [
          "character.inventory[itemId] > 0"
        ],
        "effects": [
          {
            "target": "character.inventory[{{itemId}}]",
            "operation": "subtract",
            "value": 1
          }
        ]
      }
    ],
    "Combat": [
      {
        "id": "use_pokemon_move",
        "name": "use_pokemon_move",
        "description": "Have a Pokemon use a move in battle",
        "parameters": [
          {
            "name": "pokemonId",
            "type": "string",
            "description": "ID of Pokemon using the move",
            "required": true
          },
          {
            "name": "moveId",
            "type": "string", 
            "description": "ID of the move to use",
            "required": true
          },
          {
            "name": "targetId",
            "type": "string",
            "description": "ID of the target",
            "required": false
          }
        ],
        "ruleValidations": [
          "pokemon.moves.includes(moveId)",
          "pokemon.currentPP[moveId] > 0",
          "pokemon.status != 'Fainted'"
        ],
        "effects": [
          {
            "target": "pokemon.currentPP[{{moveId}}]",
            "operation": "subtract",
            "value": 1
          }
        ]
      },
      {
        "id": "switch_pokemon",
        "name": "switch_pokemon", 
        "description": "Switch to a different Pokemon in battle",
        "parameters": [
          {
            "name": "pokemonId",
            "type": "string",
            "description": "ID of Pokemon to switch to",
            "required": true
          }
        ],
        "ruleValidations": [
          "pokemon.status != 'Fainted'",
          "pokemonId != currentPokemon.id"
        ],
        "effects": [
          {
            "target": "battle.currentPokemon",
            "operation": "set",
            "value": "{{pokemonId}}"
          }
        ]
      }
    ]
  },
  "validationRules": {
    "trainerSetup": "character.trainerClass != null && character.pokemon.length >= 1",
    "pokemonCapture": "character.pokemon.length < 6",
    "battleStart": "character.pokemon.some(p => p.status != 'Fainted')"
  },
  "promptTemplates": {
    "GameSetup": {
      "systemPrompt": "You are helping create a Pokemon trainer character",
      "phaseObjective": "Complete trainer setup and choose starter Pokemon",
      "availableFunctions": ["select_trainer_class", "choose_starter_pokemon"]
    },
    "Exploration": {
      "systemPrompt": "You are guiding a Pokemon trainer's adventure",
      "phaseObjective": "Explore the world, catch Pokemon, and have adventures",
      "availableFunctions": ["attempt_capture", "use_item"]
    },
    "Combat": {
      "systemPrompt": "You are managing Pokemon battle encounters",
      "phaseObjective": "Battle wild Pokemon and other trainers",
      "availableFunctions": ["use_pokemon_move", "switch_pokemon"]
    }
  }
}